(this.webpackJsonpstreamy=this.webpackJsonpstreamy||[]).push([[0],{115:function(e,t,a){e.exports=a(240)},240:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),i=a.n(c),s=a(10),o=a(107),u=a(13),l=a(243),m=a(12),p={isSignedIn:null,userId:null},d=a(109),h=a.n(d),f=Object(s.c)({form:l.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNED_IN":return Object(m.a)(Object(m.a)({},e),{},{isSignedIn:!0,userId:t.payload});case"SIGNED_OUT":return Object(m.a)(Object(m.a)({},e),{},{isSignedIn:!1,userId:null});default:return e}},streams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STREAMS":case"FETCH_STREAM":case"EDIT_STREAM":return Object(m.a)(Object(m.a)({},e),t.payload);case"DELETE_STREAM":return h.a.omit(e,t.payload);case"CREATE_STREAM":return Object(m.a)(Object(m.a)({},e),t.payload);default:return e}}}),b=a(11),E=a(15),v=a.n(E),y=a(27),g=a(2),O=a(1),j=a(8),S=a(7),N=a(38),w=a(111),I=a.n(w).a.create({baseURL:"https://black-network-277618.firebaseio.com"}),k=a(19),C=Object(k.a)(),T=function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.get("streams/".concat(e,".json"));case 2:n=t.sent,a({type:"FETCH_STREAM",payload:Object(N.a)({},e,n.data)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).authChange=function(t){t?e.props.signedIn(e.auth.currentUser.get().getId()):e.props.signedOut()},e.logoutUser=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.auth.signOut();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e.loginUser=Object(y.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.auth.signIn();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0.message);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e.renderButton=function(){return"undefined"!==e.auth&&!0===e.props.isSignedIn?r.a.createElement("button",{className:"ui google button red",onClick:e.logoutUser},r.a.createElement("i",{className:"google icon "}),"Logout"):"undefined"!==e.auth?r.a.createElement("button",{className:"ui google button red",onClick:e.loginUser},r.a.createElement("i",{className:"google icon "}),"Login with Google"):r.a.createElement("div",{className:"ui button loading"})},e}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client: auth2",(function(){window.gapi.client.init({clientId:"247923573101-nm01spm5uqfeju5ltomdnsahisstfejb.apps.googleusercontent.com",scope:"email"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.authChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.authChange)}))}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{margin:"auto"}},this.renderButton())}}]),a}(r.a.Component),A=Object(u.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signedIn:function(e){return{type:"SIGNED_IN",payload:e}},signedOut:function(){return{type:"SIGNED_OUT"}}})(x),D=a(24),_=function(){return r.a.createElement("div",{className:"ui menu",style:{marginTop:"20px"}},r.a.createElement(D.a,{to:"/",className:"item"},"Streamy"),r.a.createElement("div",{className:"right menu"},r.a.createElement(D.a,{to:"/",className:"item"},"All Streams"),r.a.createElement(A,null)))},M=a(113),R=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).renderStreamsList=function(){for(var t=[],a=0,n=Object.entries(e.props.streams);a<n.length;a++){var c=Object(M.a)(n[a],2),i=c[0],s=c[1],o=Object(m.a)({id:i},s);t.push(o)}return t.map((function(t){return r.a.createElement("div",{className:"item",key:t.id},r.a.createElement("div",{className:"ui tiny image"},r.a.createElement("i",{style:{width:"100%"},className:"grey huge video icon"})," "),r.a.createElement("div",{className:"content"},t.userId!==e.props.userId?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{to:"/streams/delete/".concat(t.id),className:"ui red right floated button"},"Delete"),r.a.createElement(D.a,{to:"/streams/edit/".concat(t.id),className:"ui teal right floated button"},"Edit")),r.a.createElement(D.a,{to:"/streams/show/".concat(t.id),className:"header"},t.title),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,t.description))))}))},e}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchStreams()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Current Streams"),r.a.createElement("div",{className:"ui items"},this.renderStreamsList()),null===this.props.userId?null:r.a.createElement(D.a,{to:"/streams/new",className:"ui right floated button primary"},"Create a New Stream"))}}]),a}(r.a.Component),U=Object(u.b)((function(e){return{streams:e.streams,userId:e.auth.userId}}),{fetchStreams:function(){return function(){var e=Object(y.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("streams.json");case 2:a=e.sent,t({type:"FETCH_STREAMS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(R),L=a(242),P=a(241),F=function(e){var t=e.input,a=e.label,n=e.type,c=e.meta,i=c.touched,s=c.error,o="field ".concat(s&&i?"error":"");return r.a.createElement("div",{className:o},r.a.createElement("label",null,a),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:a,type:n}))),i&&s&&r.a.createElement("div",{className:"ui negative message"},r.a.createElement("p",null,s))))},V=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form",onSubmit:this.props.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement(L.a,{name:"title",component:F,type:"text"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement(L.a,{name:"description",component:F,type:"text"})),r.a.createElement("button",{className:"ui button primary",type:"submit"},this.props.buttonName)))}}]),a}(r.a.Component),G=Object(P.a)({form:"streams",validate:function(e){var t={};return e.title||(t.title="Please enter title for your stream"),e.description||(t.description="Please enter description for your stream"),t}})(V),H=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).submit=function(t){e.props.createStream(t)},e}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Create a New Stream"),r.a.createElement(G,{buttonName:"Create",onSubmit:this.submit}))}}]),a}(r.a.Component),B=Object(u.b)(null,{createStream:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a,n){var r,c,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,c=Object(m.a)(Object(m.a)({},e),{},{userId:r}),t.next=4,I.post("streams.json",c);case 4:i=t.sent,a({type:"CREATE_STREAM",payload:Object(N.a)({},i.data.name,c)}),C.push("/");case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})(H),q=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderInitialValues=function(){if(e.props.stream){var t=e.props.stream;return{title:t.title,description:t.description}}return null},e.onSubmit=function(t){e.props.editStream(e.props.match.params.id,t)},e}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Edit Your Stream Details"),r.a.createElement(G,{onSubmit:this.onSubmit,initialValues:this.renderInitialValues(),buttonName:"Edit"}))}}]),a}(r.a.Component),J=Object(u.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:T,editStream:function(e,t){return function(){var a=Object(y.a)(v.a.mark((function a(n,r){var c,i;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=r().auth.userId,a.next=3,I.patch("streams/".concat(e,".json"),t);case 3:i=a.sent,n({type:"EDIT_STREAM",payload:Object(N.a)({},e,Object(m.a)(Object(m.a)({},i.data),{},{userId:c}))}),C.push("/");case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}})(q),X=function(e){return i.a.createPortal(r.a.createElement("div",{className:"ui dimmer modals visible active",onClick:e.onDismiss},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard modal visible active"},r.a.createElement("div",{className:"header"},e.title),r.a.createElement("div",{className:"content"},e.content),r.a.createElement("div",{className:"actions"},e.actions))),document.querySelector("#modal"))},W=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).renderActions=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"ui button negative",onClick:function(){return e.props.deleteStream(e.props.match.params.id)}},"Delete"),r.a.createElement(D.a,{className:"ui button grey",to:"/"},"Cancel"))},e}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"renderContent",value:function(){return this.props.stream?"Are you sure you want to delete the stream with title: ".concat(this.props.stream.title," ?"):"Are you sure you want to delete this stream ?"}},{key:"render",value:function(){return r.a.createElement(X,{title:"Delete Stream",content:this.renderContent(),actions:this.renderActions(),onDismiss:function(){return C.push("/")}})}}]),a}(r.a.Component),Y=Object(u.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:T,deleteStream:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.delete("streams/".concat(e,".json"));case 2:a({type:"DELETE_STREAM",payload:e}),C.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(W),z=a(112),K=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).mainVideo=r.a.createRef(),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.fetchStream(e),this.buildPlayer()}},{key:"componentDidUpdate",value:function(){this.buildPlayer()}},{key:"componentWillUnmount",value:function(){this.player.destroy()}},{key:"buildPlayer",value:function(){if(this.props.stream){var e=this.props.match.params.id;this.player=z.a.createPlayer({type:"flv",url:"http://localhost:8000/live/".concat(e,".flv")}),this.player.attachMediaElement(this.mainVideo.current),this.player.load()}}},{key:"render",value:function(){if(this.props.stream){var e=this.props.stream,t=e.title,a=e.description;return r.a.createElement("div",null,r.a.createElement("video",{style:{width:"100%"},controls:!0,ref:this.mainVideo}),r.a.createElement("h3",null,t),r.a.createElement("p",null,a))}return r.a.createElement("div",null,"Loading...")}}]),a}(r.a.Component),Q=Object(u.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:T})(K);var Z=function(){return r.a.createElement(b.b,{history:C},r.a.createElement("div",{className:"ui container"},r.a.createElement(_,null),r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",exact:!0,component:U}),r.a.createElement(b.a,{path:"/streams/new",exact:!0,component:B}),r.a.createElement(b.a,{path:"/streams/edit/:id",exact:!0,component:J}),r.a.createElement(b.a,{path:"/streams/delete/:id",exact:!0,component:Y}),r.a.createElement(b.a,{path:"/streams/show/:id",exact:!0,component:Q}))))},$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,ee=Object(s.e)(f,$(Object(s.a)(o.a)));i.a.render(r.a.createElement(u.a,{store:ee},r.a.createElement(Z,null)),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.64cfd801.chunk.js.map