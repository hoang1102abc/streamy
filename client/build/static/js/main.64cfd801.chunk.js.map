{"version":3,"sources":["reducers/authReducer.js","reducers/index.js","reducers/streamsReducer.js","apis/streamsData.js","history.js","actions/index.js","components/GoogleAuth.js","components/Header.js","components/streams/StreamList.js","components/streams/StreamForm.js","components/streams/CreateStream.js","components/streams/EditStream.js","components/Modal.js","components/streams/DeleteStream.js","components/streams/ShowStream.js","components/App.js","index.js"],"names":["INITIAL_STATE","isSignedIn","userId","combineReducers","form","formReducer","auth","state","action","type","payload","streams","_","omit","axios","create","baseURL","createBrowserHistory","fetchStream","id","dispatch","a","streamsData","get","response","data","GoogleAuth","authChange","props","signedIn","currentUser","getId","signedOut","logoutUser","signOut","console","log","message","loginUser","signIn","renderButton","className","onClick","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","style","margin","this","React","Component","connect","marginTop","to","StreamList","renderStreamsList","streamList","Object","entries","key","value","list","push","map","item","width","title","description","fetchStreams","renderField","input","label","meta","touched","error","placeholder","StreamForm","onSubmit","handleSubmit","htmlFor","Field","name","component","buttonName","reduxForm","validate","values","errors","CreateStream","submit","formValues","createStream","getState","newStream","post","history","EditStream","renderInitialValues","stream","editStream","match","params","initialValues","ownProps","patch","Modal","ReactDOM","createPortal","onDismiss","e","stopPropagation","content","actions","document","querySelector","DeleteStream","renderActions","deleteStream","renderContent","delete","ShowStream","mainVideo","createRef","buildPlayer","player","destroy","flvjs","createPlayer","url","attachMediaElement","current","controls","ref","App","Header","path","exact","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render","getElementById"],"mappings":"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","file":"static/js/main.64cfd801.chunk.js","sourcesContent":["const INITIAL_STATE = {\n  isSignedIn: null,\n  userId: null\n};\n\nexport default (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case \"SIGNED_IN\":\n      return { ...state, isSignedIn: true, userId: action.payload };\n\n    case \"SIGNED_OUT\":\n      return { ...state, isSignedIn: false, userId: null };\n\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { reducer as formReducer } from \"redux-form\";\nimport authReducer from \"./authReducer\";\nimport streamsReducer from \"./streamsReducer\";\n\nexport default combineReducers({\n  form: formReducer,\n  auth: authReducer,\n  streams: streamsReducer\n});\n","import _ from \"lodash\";\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case \"FETCH_STREAMS\":\n      return { ...state, ...action.payload };\n    case \"FETCH_STREAM\":\n      return { ...state, ...action.payload };\n    case \"EDIT_STREAM\":\n      return { ...state, ...action.payload };\n    case \"DELETE_STREAM\":\n      return _.omit(state, action.payload);\n    case \"CREATE_STREAM\":\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n};\n","import axios from \"axios\";\n\nexport default axios.create({\n  baseURL: \"https://black-network-277618.firebaseio.com\"\n});\n","import { createBrowserHistory } from \"history\";\n\nexport default createBrowserHistory();\n","import streamsData from \"../apis/streamsData\";\nimport history from \"../history\";\n\nexport const signedIn = userId => {\n  return {\n    type: \"SIGNED_IN\",\n    payload: userId\n  };\n};\n\nexport const signedOut = () => {\n  return {\n    type: \"SIGNED_OUT\"\n  };\n};\n\nexport const fetchStreams = () => async dispatch => {\n  const response = await streamsData.get(\"streams.json\");\n\n  dispatch({ type: \"FETCH_STREAMS\", payload: response.data });\n};\n\nexport const fetchStream = id => async dispatch => {\n  const response = await streamsData.get(`streams/${id}.json`);\n\n  dispatch({ type: \"FETCH_STREAM\", payload: { [id]: response.data } });\n};\n\nexport const editStream = (id, formValues) => async (dispatch, getState) => {\n  const { userId } = getState().auth;\n  const response = await streamsData.patch(`streams/${id}.json`, formValues);\n\n  dispatch({\n    type: \"EDIT_STREAM\",\n    payload: { [id]: { ...response.data, userId: userId } }\n  });\n\n  history.push(\"/\");\n};\n\nexport const deleteStream = id => async dispatch => {\n  await streamsData.delete(`streams/${id}.json`);\n\n  dispatch({ type: \"DELETE_STREAM\", payload: id });\n\n  history.push(\"/\");\n};\nexport const createStream = formValues => async (dispatch, getState) => {\n  const { userId } = getState().auth;\n  const newStream = { ...formValues, userId: userId };\n  const response = await streamsData.post(\"streams.json\", newStream);\n\n  dispatch({\n    type: \"CREATE_STREAM\",\n    payload: { [response.data.name]: newStream }\n  });\n\n  history.push(\"/\");\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { signedIn, signedOut } from \"../actions\";\n\nclass GoogleAuth extends React.Component {\n  componentDidMount() {\n    window.gapi.load(\"client: auth2\", () => {\n      window.gapi.client\n        .init({\n          clientId:\n            \"247923573101-nm01spm5uqfeju5ltomdnsahisstfejb.apps.googleusercontent.com\",\n          scope: \"email\"\n        })\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.authChange(this.auth.isSignedIn.get());\n          this.auth.isSignedIn.listen(this.authChange);\n        });\n    });\n  }\n\n  authChange = isSignedIn => {\n    if (isSignedIn) {\n      this.props.signedIn(this.auth.currentUser.get().getId());\n    } else {\n      this.props.signedOut();\n    }\n  };\n\n  logoutUser = async () => {\n    try {\n      await this.auth.signOut();\n    } catch (e) {\n      console.log(e.message);\n    }\n  };\n\n  loginUser = async () => {\n    try {\n      await this.auth.signIn();\n    } catch (e) {\n      console.log(e.message);\n    }\n  };\n\n  renderButton = () => {\n    if (this.auth !== \"undefined\" && this.props.isSignedIn === true) {\n      return (\n        <button className=\"ui google button red\" onClick={this.logoutUser}>\n          <i className=\"google icon \"></i>\n          Logout\n        </button>\n      );\n    } else if (this.auth !== \"undefined\") {\n      return (\n        <button className=\"ui google button red\" onClick={this.loginUser}>\n          <i className=\"google icon \"></i>\n          Login with Google\n        </button>\n      );\n    } else {\n      return <div className=\"ui button loading\"></div>;\n    }\n  };\n\n  render() {\n    return <div style={{ margin: \"auto\" }}>{this.renderButton()}</div>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(mapStateToProps, { signedIn, signedOut })(GoogleAuth);\n","import React from \"react\";\nimport GoogleAuth from \"./GoogleAuth\";\nimport { Link } from \"react-router-dom\";\n\nexport default () => {\n  return (\n    <div className=\"ui menu\" style={{ marginTop: \"20px\" }}>\n      <Link to=\"/\" className=\"item\">\n        Streamy\n      </Link>\n      <div className=\"right menu\">\n        <Link to=\"/\" className=\"item\">\n          All Streams\n        </Link>\n        <GoogleAuth />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchStreams } from \"../../actions\";\nimport { Link } from \"react-router-dom\";\n\nclass StreamList extends React.Component {\n  componentDidMount() {\n    this.props.fetchStreams();\n  }\n\n  renderStreamsList = () => {\n    let streamList = [];\n\n    for (let [key, value] of Object.entries(this.props.streams)) {\n      const list = { id: key, ...value };\n      streamList.push(list);\n    }\n\n    return streamList.map(item => {\n      return (\n        <div className=\"item\" key={item.id}>\n          <div className=\"ui tiny image\">\n            <i style={{ width: \"100%\" }} className=\"grey huge video icon\"></i>{\" \"}\n          </div>\n          <div className=\"content\">\n            {item.userId !== this.props.userId ? null : (\n              <>\n                <Link\n                  to={`/streams/delete/${item.id}`}\n                  className=\"ui red right floated button\"\n                >\n                  Delete\n                </Link>\n                <Link\n                  to={`/streams/edit/${item.id}`}\n                  className=\"ui teal right floated button\"\n                >\n                  Edit\n                </Link>\n              </>\n            )}\n\n            <Link to={`/streams/show/${item.id}`} className=\"header\">\n              {item.title}\n            </Link>\n            <div className=\"description\">\n              <p>{item.description}</p>\n            </div>\n          </div>\n        </div>\n      );\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <h2>Current Streams</h2>\n\n        <div className=\"ui items\">{this.renderStreamsList()}</div>\n        {this.props.userId === null ? null : (\n          <Link to=\"/streams/new\" className=\"ui right floated button primary\">\n            Create a New Stream\n          </Link>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return { streams: state.streams, userId: state.auth.userId };\n};\nexport default connect(mapStateToProps, { fetchStreams })(StreamList);\n","import React from \"react\";\nimport { Field, reduxForm } from \"redux-form\";\n\nconst validate = values => {\n  const errors = {};\n\n  if (!values.title) {\n    errors.title = \"Please enter title for your stream\";\n  }\n  if (!values.description) {\n    errors.description = \"Please enter description for your stream\";\n  }\n  return errors;\n};\n\nconst renderField = ({ input, label, type, meta: { touched, error } }) => {\n  const className = `field ${error && touched ? \"error\" : \"\"}`;\n\n  return (\n    <div className={className}>\n      <label>{label}</label>\n      <div>\n        <div>\n          <input {...input} placeholder={label} type={type} />\n        </div>\n\n        {touched && error && (\n          <div className=\"ui negative message\">\n            <p>{error}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nclass StreamForm extends React.Component {\n  render() {\n    return (\n      <div>\n        <form className=\"ui form\" onSubmit={this.props.handleSubmit}>\n          <div className=\"field\">\n            <label htmlFor=\"title\">Title</label>\n            <Field name=\"title\" component={renderField} type=\"text\" />\n          </div>\n          <div className=\"field\">\n            <label htmlFor=\"description\">Description</label>\n            <Field name=\"description\" component={renderField} type=\"text\" />\n          </div>\n          <button className=\"ui button primary\" type=\"submit\">\n            {this.props.buttonName}\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default reduxForm({ form: \"streams\", validate })(StreamForm);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStream } from \"../../actions\";\nimport StreamForm from \"./StreamForm\";\n\nclass CreateStream extends React.Component {\n  submit = formValues => {\n    this.props.createStream(formValues);\n  };\n\n  render() {\n    return (\n      <div>\n        <h2>Create a New Stream</h2>\n        <StreamForm buttonName=\"Create\" onSubmit={this.submit} />\n      </div>\n    );\n  }\n}\n\nexport default connect(null, { createStream })(CreateStream);\n","import React from \"react\";\nimport { fetchStream, editStream } from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport StreamForm from \"./StreamForm\";\n\nclass EditStream extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n\n  renderInitialValues = () => {\n    if (!this.props.stream) {\n      return null;\n    } else {\n      const { title, description } = this.props.stream;\n\n      return { title, description };\n    }\n  };\n\n  onSubmit = formValues => {\n    this.props.editStream(this.props.match.params.id, formValues);\n  };\n\n  render() {\n    return (\n      <div>\n        <h2>Edit Your Stream Details</h2>\n        <StreamForm\n          onSubmit={this.onSubmit}\n          initialValues={this.renderInitialValues()}\n          buttonName=\"Edit\"\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream, editStream })(\n  EditStream\n);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nconst Modal = props => {\n  return ReactDOM.createPortal(\n    <div className=\"ui dimmer modals visible active\" onClick={props.onDismiss}>\n      <div\n        onClick={e => e.stopPropagation()}\n        className=\"ui standard modal visible active\"\n      >\n        <div className=\"header\">{props.title}</div>\n        <div className=\"content\">{props.content}</div>\n        <div className=\"actions\">{props.actions}</div>\n      </div>\n    </div>,\n\n    document.querySelector(\"#modal\")\n  );\n};\n\nexport default Modal;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { fetchStream, deleteStream } from \"../../actions\";\nimport Modal from \"../Modal\";\nimport history from \"../../history\";\n\nclass DeleteStream extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n  renderContent() {\n    if (!this.props.stream) {\n      return \"Are you sure you want to delete this stream ?\";\n    } else {\n      return `Are you sure you want to delete the stream with title: ${this.props.stream.title} ?`;\n    }\n  }\n  renderActions = () => {\n    return (\n      <>\n        <button\n          className=\"ui button negative\"\n          onClick={() => this.props.deleteStream(this.props.match.params.id)}\n        >\n          Delete\n        </button>\n        <Link className=\"ui button grey\" to=\"/\">\n          Cancel\n        </Link>\n      </>\n    );\n  };\n\n  render() {\n    return (\n      <Modal\n        title=\"Delete Stream\"\n        content={this.renderContent()}\n        actions={this.renderActions()}\n        onDismiss={() => history.push(\"/\")}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream, deleteStream })(\n  DeleteStream\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport flvjs from \"flv.js\";\nimport { fetchStream } from \"../../actions\";\n\nclass ShowStream extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.mainVideo = React.createRef();\n  }\n  componentDidMount() {\n    const { id } = this.props.match.params;\n\n    this.props.fetchStream(id);\n    this.buildPlayer();\n  }\n\n  componentDidUpdate() {\n    this.buildPlayer();\n  }\n\n  componentWillUnmount() {\n    this.player.destroy();\n  }\n\n  buildPlayer() {\n    if (!this.props.stream) {\n      return;\n    }\n    const { id } = this.props.match.params;\n\n    this.player = flvjs.createPlayer({\n      type: \"flv\",\n      url: `http://localhost:8000/live/${id}.flv`\n    });\n    this.player.attachMediaElement(this.mainVideo.current);\n    this.player.load();\n  }\n\n  render() {\n    if (!this.props.stream) {\n      return <div>Loading...</div>;\n    } else {\n      const { title, description } = this.props.stream;\n      return (\n        <div>\n          <video\n            style={{ width: \"100%\" }}\n            controls={true}\n            ref={this.mainVideo}\n          />\n          <h3>{title}</h3>\n          <p>{description}</p>\n        </div>\n      );\n    }\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream })(ShowStream);\n","import React from \"react\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport StreamList from \"./streams/StreamList\";\nimport CreateStream from \"./streams/CreateStream\";\nimport EditStream from \"./streams/EditStream\";\nimport DeleteStream from \"./streams/DeleteStream\";\nimport ShowStream from \"./streams/ShowStream\";\nimport history from \"../history\";\n\nfunction App() {\n  return (\n    <Router history={history}>\n      <div className=\"ui container\">\n        <Header />\n\n        <Switch>\n          <Route path=\"/\" exact component={StreamList} />\n          <Route path=\"/streams/new\" exact component={CreateStream} />\n          <Route path=\"/streams/edit/:id\" exact component={EditStream} />\n          <Route path=\"/streams/delete/:id\" exact component={DeleteStream} />\n          <Route path=\"/streams/show/:id\" exact component={ShowStream} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport reduxThunk from \"redux-thunk\";\nimport { Provider } from \"react-redux\";\nimport reducers from \"./reducers\";\nimport App from \"./components/App\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}